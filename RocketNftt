-- Поиск самого дорогого подарка в инвентаре
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Функция для получения цены предмета (адаптируйте под конкретную игру)
local function getItemValue(itemName)
    -- Здесь должна быть логика получения цены предмета
    -- Это может быть через MarketplaceService, таблицу цен, или другие методы
    
    -- Пример: если в игре есть модуль с ценами
    local success, priceData = pcall(function()
        return game:GetService("MarketplaceService"):GetProductInfo(itemName)
    end)
    
    if success and priceData then
        return priceData.PriceInRobux or 0
    end
    
    -- Альтернативный метод: если цены хранятся в таблице
    local priceTable = {
        ["Lol Pop (Gold Star)"] = 1000,
        ["Diamond Sword"] = 5000,
        ["Golden Crown"] = 10000,
        -- добавьте другие предметы и их цены
    }
    
    return priceTable[itemName] or 0
end

-- Функция для поиска самого дорогого подарка
local function findMostExpensiveGift()
    local mostExpensiveItem = nil
    local highestPrice = 0
    
    -- Получаем инвентарь игрока
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    local playerGui = LocalPlayer:FindFirstChild("PlayerGui")
    
    -- Проверяем разные места, где могут храниться предметы
    local inventoryLocations = {backpack, playerGui}
    
    for _, location in pairs(inventoryLocations) do
        if location then
            for _, item in pairs(location:GetChildren()) do
                -- Проверяем, является ли предмет подарком (адаптируйте критерии)
                if item:IsA("Tool") or item:IsA("HopperBin") or item:FindFirstChild("IsGift") then
                    local itemPrice = getItemValue(item.Name)
                    
                    if itemPrice > highestPrice then
                        highestPrice = itemPrice
                        mostExpensiveItem = item.Name
                    end
                end
            end
        end
    end
    
    -- Если не нашли в обычных местах, проверяем ReplicatedStorage
    if not mostExpensiveItem then
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local giftsFolder = ReplicatedStorage:FindFirstChild("Gifts") or ReplicatedStorage:FindFirstChild("Items")
        
        if giftsFolder then
            for _, gift in pairs(giftsFolder:GetChildren()) do
                local giftPrice = getItemValue(gift.Name)
                if giftPrice > highestPrice then
                    highestPrice = giftPrice
                    mostExpensiveItem = gift.Name
                end
            end
        end
    end
    
    return mostExpensiveItem or "Lol Pop (Gold Star)" -- fallback на дефолтный предмет
end

-- Основной скрипт
local mostExpensiveGift = findMostExpensiveGift()
print("Самый дорогой подарок:", mostExpensiveGift)

-- Запускаем основной скрипт с найденным подарком
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Rocket = ReplicatedStorage.Events.Rocket -- RemoteFunction 

Rocket:InvokeServer(
    [mostExpensiveGift],
    "Play"
)
